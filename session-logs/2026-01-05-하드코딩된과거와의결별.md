[제목]: 와요의 도약, 하드코딩된 과거와의 결별
(부제: 2026-01-05, 서비스 실배포 가동 및 PC 버전 고도화)

발단: 프로젝트의 완결을 위한 배포 준비
레오는 개발 환경에 머물러 있던 '와요(Wayo)' 프로젝트를 세상에 내놓기로 결정한다. 코드 곳곳에 남아있던 'http://localhost'라는 흔적들을 지우고, 실제 서버 환경에서 유연하게 동작할 수 있는 토대를 마련하는 것이 오늘의 시작이었다. 안티그래비티는 레오의 의도를 파악하고 프론트엔드 전반의 API 호출 로직을 환경변수 기반으로 전환하기 시작했다.

전개: 도메인 전략과 가다듬어지는 UI
배포 환경을 고려한 인프라 구성이 논의되었다. 레오는 `wayo.co.kr`과 `gabojago.wayo.co.kr`이라는 두 개의 도메인을 활용하길 원했고, 안티그래비티는 Next.js의 미들웨어를 통해 호스트별 라우팅 로직을 구현했다. 동시에 PC 사용자들을 위해 3D 애니메이션이 가미된 초대장 뷰와 실시간 미리보기가 포함된 생성 화면이 추가되었다. 프로젝트는 점차 상용 서비스다운 면모를 갖춰갔다.

위기: 플랫폼의 선택과 배포의 장벽
레오는 백엔드 배포 플랫폼으로 Render를 고려했으나, 무료 플랜의 제약과 데이터 보존 이슈에 직면한다. 대안으로 Fly.io가 부상했지만, $29라는 월 고정 비용에 대한 우려와 생소한 커맨드라인 도구(CLI)의 부재는 새로운 난관이었다. 실제 배포를 시도했을 때, 터미널은 명령어를 찾지 못하거나 설정 파일을 인식하지 못하는 등 여러 차례 오류 메시지를 내뱉으며 작업을 가로막았다.

절정: 도쿄 서버에 안착한 데이터베이스
안티그래비티는 차분하게 오류의 원인을 분석했다. `flyctl`의 설치부터 로그인, 그리고 SQLite 데이터의 영속성을 보장하기 위한 '볼륨(Volume)' 생성 과정을 단계별로 안내했다. 특히 홍콩 지역 설정이 실패하자 즉시 도쿄(`nrt`) 지역으로 선회하는 기민함을 보였다. 레오는 안내에 따라 Rails의 마스터 키를 서버 시크릿으로 등록하고 최종적으로 `fly deploy` 명령을 하달했다. 도커 이미지가 빌드되고 레이어가 푸시되는 긴밀한 과정 끝에, 서버 주소가 할당되었다.

결말: 정식 도메인과 연결된 두 세계
`wayo.fly.dev`라는 백엔드 주소가 확보됨에 따라, Vercel에 미리 구성해둔 프론트엔드와의 연결 고리가 완성되었다. 하드코딩된 URL이 사라진 자리에는 유연한 환경변수가 채워졌고, 로컬 머신에서만 돌던 코드는 이제 구름 위에서 전 세계 사용자를 맞이할 준비를 마쳤다. 레오와 안티그래비티는 서로의 논리적 피드백 속에서 복잡한 배포 프로세스를 안정적인 가이드라인으로 치환해내며 하루의 작업을 갈무리했다.

---

🛠 기술적 각주 (Technical Summary)
수정된 파일 (Modified Files):
- frontend/src/app/**: API 호출 URL을 환경변수로 전환
- backend/fly.toml: Fly.io 배포 및 볼륨 설정
- frontend/src/middleware.ts: 도메인 기반 호스트 라우팅 구현
- backend/.env.example: 백엔드 환경변수 가이드 정의

주요 기술 (Key Tech Stack):
- Next.js Middleware: 다중 도메인 라우팅 처리
- Fly.io Volumes: 스테이트리스 컨테이너 환경에서 SQLite 데이터 영속화
- Framer Motion: PC 버전 초대장 개봉 및 UI 애니메이션

핵심 기능 (Key Features):
- URL 외부화: 환경변수(`NEXT_PUBLIC_API_URL`)를 통한 유연한 백엔드 연결
- PC 전용 UI: 모바일과 차별화된 대화면 최적화 레이아웃 및 시네마틱 효과 구현
