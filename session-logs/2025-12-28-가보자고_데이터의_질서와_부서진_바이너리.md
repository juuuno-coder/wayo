# [데이터의 질서와 부서진 바이너리]: 가보자고 플랫폼의 핵심 고도화와 예기치 못한 결함의 복구

_(부제: 2025-12-28, 카테고리 필터링 고도화 및 DB 핵심 스키마 설계)_

## 발단: 모호한 경계의 정리

레오는 '가보자고' 프로젝트의 다음 단계로 나아가기 위해 안티그래비티를 호출했다. 프로젝트는 이미 PC와 모바일을 아우르는 레이아웃의 기초를 갖추고 있었으나, 실제 데이터를 다루는 논리적 흐름은 아직 파편화되어 있었다. 레오는 Phase 2의 핵심인 이벤트 카테고리 필터링과 데이터 정합성 보정을 우선 과제로 선택하며 고도화의 시작을 알렸다.

## 전개: 사용자 경험의 세분화

안티그래비티는 메인 페이지의 인터페이스를 두 가지 모드로 분리하는 전략을 세웠다. 모든 정보를 훑어보는 '섹션 뷰'와 특정 목적에 집중하는 '그리드 뷰'의 공존이었다. 동시에 흩어져 있던 날짜 포맷팅과 이벤트 상태 계산 로직을 `utils/date.ts`라는 단일 통제점으로 집중시켰다. 이는 단순한 코드 정리를 넘어, 서비스 전체의 시각적 일관성을 확보하기 위한 기초 공사였다.

## 위기: 부서진 바이너리와 구문의 균열

작업은 순탄치 않았다. 프론트엔드 코드 수정 과정에서 코드 조각의 불일치로 인해 다수의 린트 에러와 JSX 구문 오류가 발생했다. 설상가상으로 백엔드 환경 또한 불안정했다. 레일즈 명령어를 실행하려 할 때마다 원인을 알 수 없는 에러가 발생했고, 조사 결과 `bin/rails` 바이너리 파일 선두에 '루'라는 출처 불명의 문자가 삽입되어 파일 시스템이 깨져 있는 상태가 발견되었다. 환경 전반에 걸쳐 예상치 못한 기술적 부채와 결함이 동시다발적으로 드러난 순간이었다.

## 절정: 시스템의 재건과 폴리모픽 설계

안티그래비티는 차분하게 오류를 추적했다. 먼저 오염된 `bin/rails` 파일을 정제하여 커맨드 라인 환경을 복구했다. 이어 프론트엔드의 부서진 구문들을 하나씩 맞춰나가며 시스템의 안정성을 되찾았다. 레오는 한 걸음 더 나아가 '찜하기'와 '리뷰' 기능의 구현을 요청했다. 안티그래비티는 이를 위해 단순한 테이블 생성을 넘어, 확장성을 고려한 '폴리모픽(Polymorphic)' 관계를 설계했다. `likes`와 `reviews`가 다양한 대상을 참조할 수 있도록 설계된 대규모 마이그레이션 파일 `20241221142000_create_core_tables.rb`가 작성되며 데이터베이스의 진정한 뼈대가 세워졌다.

## 결말: 정리와 회고

불안정했던 개발 환경은 다시금 질서를 찾았다. 카테고리 필터링은 더욱 정교해졌고, 프로젝트의 심장부인 데이터베이스는 향후 추가될 다양한 기능을 수용할 수 있는 견고한 토대를 갖추게 되었다. 이번 세션은 단순히 기능을 추가하는 것을 넘어, 예기치 못한 시스템 결함을 발견하고 이를 정교하게 복구하는 과정이 코드의 완성도만큼이나 중요하다는 사실을 레오와 안티그래비티 모두에게 일깨워주었다.

---

### 🛠 기술적 각주 (Technical Summary)

- **수정된 파일 (Modified Files)**:
  - `frontend/src/app/page.tsx`: 카테고리별 그리드/섹션 뷰 전환 로직 구현 및 코드 정리
  - `frontend/src/utils/date.ts`: 전역 날짜 및 상태 계산 유틸리티 신설
  - `backend/bin/rails`: 손상된 파일 복구 및 인코딩 수정
  - `backend/db/migrate/20241221142000_create_core_tables.rb`: 핵심 DB 스키마(Items, Events, Likes, Reviews 등) 설계 및 작성
- **주요 기술 (Key Tech Stack)**:
  - **Polymorphic Associations**: 좋아요(Likes)와 리뷰(Reviews) 기능을 다양한 모델에 유연하게 연결하기 위해 사용
  - **Next.js 15 App Router**: 상태에 따른 동적 컴포넌트 렌더링 최적화
- **핵심 기능 (Key Features)**:
  - **Dynamic Grid View**: 특정 카테고리 선택 시 최적화된 2열 그리드 레이아웃 제공
  - **Unified Date Branding**: 서비스 전반에 걸친 일관된 날짜 및 D-Day 표기 시스템
